---
title: 「如何在AEM中複製TarMK例項」
description: 說明
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "From https://helpx.adobe.com/experience-manager/kb/how-to-clone-an-AEM-TarMK-instance-AEM.html"
bug: false
article-created-by: Emily Geary
article-created-date: "3/24/2021 11:36:07 PM"
article-published-by: Emily Geary
article-published-date: "3/24/2021 11:37:50 PM"
version-number: 2
article-number: KA-16875
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=371b76b1-f98c-eb11-a812-000d3a58b9d1"
exl-id: d9c35199-775f-4f24-8d30-3828bb11e7f6
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '196'
ht-degree: 3%

---

# 如何在AEM中複製TarMK例項

## 說明


本文說明如何正確複製使用TarMK（或TarMK + FileDataStore）儲存的AEM執行個體。


## 解析度


下列步驟示範如何在Linux上使用rsync複製AEM + TarMK + FileDataStore執行個體，並在/mnt/aem/author底下安裝AEM。

1. 使用rsync等命令執行時，將完整AEM例項複製到其他伺服器。  請務必在復製程式期間保留時間戳記，並排除記錄檔資料夾和資料存放區。  例如: `rsync -av --exclude 'crx-quickstart/logs' --exclude 'crx-quickstart/repository/repository/datastore' /mnt/aem/author user@dest-host:/mnt/aem/`
2. 停止AEM
3. 起始TarMK區段存放區資料夾的另一個副本，以取得自第一個副本完成以來的任何較新變更： `rsync -av /mnt/aem/author/crx-quickstart/repository/segmentstore/* user@dest-host:/mnt/aem/author/crx-quickstart/repository/segmentstore/`
4. 啟動AEM。
5. 執行AEM時複製資料存放區。 例如: `rsync -av /mnt/aem/author user@dest-host:/mnt/aem/crx-quickstart/repository/repository/datastore /mnt/aem/crx-quickstart/repository/repository/`
6. 在目的地伺服器上，重新建立記錄檔資料夾，刪除crx-quickstart/repository/index資料夾，然後從crx-quickstart/launchpad/felix資料夾中刪除sling.id.file。

`mkdir /mnt/aem/crx-quickstart/logs`

`rm -rf /mnt/aem/crx-quickstart/repository/index`

`find /mnt/aem/crx-quickstart/launchpad/felix -type f -name "sling.id.file" -exec rm -f {} \; -print`
7.在目標伺服器上，啟動AEM並測試您的執行個體。


<b>重要注意事項：</b>

您必須確保資料存放區是在segmentstore資料夾之後複製，且所有時間戳記都會在複製期間保留。  Rsync允許使用 — a選項保留時間戳。
