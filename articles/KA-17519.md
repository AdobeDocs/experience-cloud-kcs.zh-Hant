---
title: 「如何產生資料模型或資料字典」
description: 說明
solution: Campaign
product: Campaign
applies-to: "Campaign Classic"
keywords: "KCS, Classic, ACC，資料模型，資料字典，做法"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Jim Menn
article-created-date: "3/24/2023 1:58:16 AM"
article-published-by: Jim Menn
article-published-date: "3/24/2023 2:15:43 AM"
version-number: 5
article-number: KA-17519
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=42e0f551-e7c9-ed11-b597-6045bd0061cb"
source-git-commit: ac666665ccb1549a78e0d30d349badb50dd29dc9
workflow-type: tm+mt
source-wordcount: '656'
ht-degree: 0%

---

# 如何產生資料模型或資料字典

## 說明 {#description}

<b>環境</b><br><br>Campaign Classicv7<br><br> <br><br><br><b>問題/症狀</b>
本檔案說明兩種產生Adobe Campaign資料庫資料模型或資料字典的方式。


## 解決方法 {#resolution}


Adobe Campaign包含數百個表格。 本檔案提供兩種不同的方式來產生結構檔案：

通過生成Open Office文檔(在Microsoft Word中可讀)或通過生成HTML網頁。
<br>方法1:建立OpenOffice文檔<br> 
在Adobe Campaign *datakit\nms\fra\package\optional* 目錄中，有一個程式包，稱為 <b>dbbBuilder.xml</b>. 此包檔案包含一個JavaScript實體，該實體生成一個Open Office文檔，詳細說明Adobe Campaign實例的資料庫架構。
<br> 
<b>建立JavaScript檔案</b>
<br> 
使用「促銷活動控制台瀏覽器」檢視，在「管理設定JavaScript程式碼」中撰寫簡單的JavaScript公用程式，如下列範例所示。

更改strOutputFile值以添加要建立Open Office文檔的目標目錄。 例如：/tmp/database-description.odt。
<br> 
*檔案示例： cus:build-dbd.js*


```
/* * build-dbd.js/ var 
    strXslt = "nl:dbdToOdt.xsl" 
    var strTemplate = installDirectory( "datakit/nl/dbd-template.odt" ) 
    var strOutputFile = "database-description.odt" 
    var sql = xtk.sqlSchema.create() sql.Generate() 
    var strDbXml = db = sql.toXML().toXMLString() 
    var strOdt = applyXsl(strXslt, strDbXml) 
    strOdt = strOdt.replace(/\?xml .*\?\r?\n/, '\r\n' ) 
    var mbContent = new MemoryBuffer mbContent.fromString(strOdt, "utf-8" ) 
    var zip = new ZipFile(strTemplate) 
    zip.open() zip.setEntry( "content.xml" , mbContent) zip.save(strOutputFile)
```

<br> <br> 
<b>導入dbdBuilder.xml</b>
<br> 
通過在儲存包的目錄中執行以下命令，可以導入dbdBuilder.xml包。 以Adobe Campaign例項的實際名稱取代instance_name。

`nlserver package - import :dbdBuilder.xml -instance:instance_name`
<br> 
*Debian的套件匯入範例*


```
neolane@debian: /nl6/datakit/nms/fra/package/optional $ cd 
    /nl6/datakit/nms/fra/package/optionalneolane@debian:/nl6/datakit/nms/fra/package/optional$ 
    nlserverpackage -import:dbdBuilder.xml 
    -instance:10:46:09 
    Application serverfor Adobe Campaign Version 6.1.1(build 8537) of 04/16/201410:46:09 
    Starting 1 connection(s) on pool'default vmcloud'(PostgreSQL, server='localhost', 
    login='user:password')10:46:09 Importing package'/tmp/dbdBuilder.xml'...10:46:11 
    Enumerating thefile entities...10:46:11 
    Writing entitiesin the database...10:46:11 
    Saving entities oftype 'xtk:xslt'...10:46:12 
    Saving entities oftype 'xtk:javascript'...10:46:12 
    Installation of packages successful.
```


Windows的套件匯入範例


```
C: cd "\Program Files (x86)\Adobe\Adobe Campaign v6\bin" 
    C:\Program Files (x86)\Adobe\Adobe Campaign v6\binnlserver.exe 
    package - import : ..\datakit\nms\fra\package\optional\dbdBuilder.xml 
    -instance: 13:52:57 Application server for Adobe Campaign Version 6.1.1 (build 8622) of 01 /19/2015 13:52:57 
    Starting 1 connection(s) on pool 'default ' (PostgreSQL, server= 'localhost' , login= 'user:password' ) 13:52:57
    Importing package 'C:\Program Files (x86)\Adobe\Adobe Campaign v6\bin\..\datakit\nms\fra\package\optional\dbdBuilder.xml'... 
    13:52:59 Enumerating the file entities... 
    13:52:59 Writing entities in the database... 
    13:52:59 Saving entities of type 'xtk:javascript' ... 
    13:52:59 Installation of packages successful.
```

<br> 
<b>生成資料庫說明</b>
<br> 
要生成資料庫說明，可以使用命令行使用nlserver模組執行cus:build-dbd.js JavaScript實體，如下所示：


```
neolane@debian: /tmp $ nlserver javascript -instance: cus:build-dbd.js 05:06:12 
    Application server for Adobe Campaign Version 6.1.1 (build 8537) of 04 /16/2014 
    05:06:12 Starting 1 connection(s) on pool 
    'default vmcloud' (PostgreSQL, server= 'localhost' , login= 'user:vmcloud' ) 
    05:06:12 Executing JavaScript from entity of identifier 'xs:build-dbd.js' ... 
    05:06:12 Generating the database structure... 
    05:06:12 Element '0' unknown (see definition of schema 'Recipient delivery logs (nms:broadLogRcp)'). 
    (iRc=16384) 
    05:06:12 Element '0' unknown (see definition of schema 'Visitor delivery logs (nms:broadLogVisitor)'). 
    (iRc=16384) 05:06:12 Element '0' unknown (see definition of schema 'Recipient delivery logs (nms:broadLogRcp)'). 
    (iRc=16384) 05:06:12 Element '0' unknown (see definition of schema 'Visitor delivery logs (nms:broadLogVisitor)'). 
    (iRc=16384) 05:06:13 Generating the ODT XML... 05:06:14 Saving the zip file ... 
    05:06:14 File saved as 'database-description.odt
```

<br> 
在您在build-dbd.js中指定的目錄中生成名為「database-description.odt」的OpenOffice文檔。 它包含Adobe Campaign表格的說明。 此文檔可以使用Microsoft Word或OpenOffice進行編輯，並可轉換為PDF。
![database-description](https://helpx.adobe.com/content/dam/help/en/campaign/kb/generate-data-model/jcr%3acontent/main-pars/image/database-description.gif "database-description")資料模型檔案範例<br> 
本文檔顯示資料庫表索引、SQL欄位和鍵，以及模式連結的清單。
<br> 方法2:使用xsltproc建立網頁<br> 
此替代方法基於Linux xsltproc命令行工具。 在此情況中，通過建立XML文檔導出架構，然後使用XSLT檔案將XML轉換為HTML。 可在瀏覽器中檢視輸出檔案。

對於此方法，您需要：

- 運行xsltproc的Linux或Macintosh環境，它是標準的Macintosh Mac OS X命令行實用程式。
- 附加的檔案、database.xsl和styles.xml（請參閱attachments.zip）。


注意：

有Windows等效模組， <b>msxsl.exe</b>，在那個平台上可以正常運作， <b>但是它沒有被測試</b>.

現在 <b>msxsl.exe</b> 是 <b>MS核心XML服務(MSXML)</b>.

此 <b>[MS核心XML服務](https://www.catalog.update.microsoft.com/Search.aspx?q=Microsoft%20Core%20XML%20Services%20%28MSXML%29%204.0)</b><b>[(MSXML)](https://www.catalog.update.microsoft.com/Search.aspx?q=Microsoft%20Core%20XML%20Services%20%28MSXML%29%204.0)</b> 可在Microsoft更新目錄中找到下載。



下載
[取得檔案](https://helpx.adobe.com/content/dam/help/en/campaign/kb/generate-data-model/jcr:content/main-pars/download_123504941/attachments.zip "attachments.zip") <br>database.xsl和styles.xml<br> <br> <br> 
1. 將兩個附加的檔案database.xsl和styles.xml下載到Linux或Mac上的工作目錄中。 在XSL頂端，您可以調整兩個變數：xsl:variable name=&quot;unicode&quot;false/xsl:variable xsl:variable name=&quot;engine&quot;postgresql/xsl:variable支援的引擎值為：postgresql、mssql和oracle。 將引擎變數設為與行銷執行個體資料庫對應的值。
2. 從Campaign主控台，前往管理組態套件管理套件定義，並建立包含資料結構(xtk:schema)的package.xml檔案。
3. 匯出套件，然後將檔案複製到您的Linux或Mac工作目錄。
4. 使用XSLT在工作目錄中運行以下命令，以處理package.xml檔案： *xsltproc database.xsl package.xml database.html*.


生成的文檔不完美：

- 無法記錄連結上的某些連接條件。
- 當枚舉在架構中引用，但在另一個架構中定義（該架構不在包中）時，將不記錄枚舉。

