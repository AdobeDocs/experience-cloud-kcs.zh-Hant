---
title: "停用AEM連結檢查程式"
description: 說明
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager 6.4"
keywords: 「KCS」
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Amol Mahajan
article-created-date: "11/11/2022 11:42:17 AM"
article-published-by: Amol Mahajan
article-published-date: "1/25/2023 11:36:53 AM"
version-number: 6
article-number: KA-17468
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=727849e3-b561-ed11-9562-6045bd0067ea"
source-git-commit: 0596aeb0db927cabf08c268b403b40429a6d74e8
workflow-type: tm+mt
source-wordcount: '412'
ht-degree: 18%

---

# 停用AEM連結檢查程式

## 說明 {#description}

<b>環境</b>
Experience Manager 6.4


<b>問題/症狀</b>
如果「連結檢查器」已設定為在連結中斷時不採取任何操作。 那麼，在這種情況下，如何禁用外部連結檢查器來驗證連結？ 在執行CPU分析和分析線程轉儲時，鏈路檢查會影響效能，我們希望將其關閉。

<b>背景： </b> 每當AEM中載入網站時，「連結檢查器」就會自動檢查所有內容頁面中的內嵌連結，並將每個連結標示為「有效」或「無效」。

由於紀錄中有大量連結檢查器警告，這可能會減慢執行個體或網站的速度。  可以決定停用某些連結檢查。

注意：不應在發佈執行個體上啟用連結檢查器。


## 解決方法 {#resolution}

如何停用連結檢查器或設定以在 AEM 中將連結標記為有效<br>
1. 停用頁面中的連結檢查：
   - 新增 `x-cq-linkchecker="valid"` 參數 <b>標籤</b> 確認連結會一律由「連結檢查程式」標示為有效。


   - （可選）使用 `x-cq-linkchecker="skip"` 在 <b>標籤</b> 連結檢查程式甚至不會檢查有效性。
2. 透過 <b>AEM Web Console</b>:
   - 存取AEM Web主控台設定1。


   - 搜尋 <b>Day CQ鏈路檢查器變壓器</b>.


   - 檢查 <b>禁用檢查</b> 框中，按一下「保存」。
3. 禁用特定域的連結檢查：
   - 存取AEM Web主控台設定1。


   - 搜尋 <b>日CQ連結檢查程式服務</b>.


   - 編輯 <b>連結檢查覆蓋模式</b> 參數。


<b>範例1</b>:系統/

不會檢查以系統開頭的任何外部連結。  透過點選 + 新增其他覆寫模式至此區段。

<b>範例 2</b>:

這會將所有連結標示為有效的後續項目。

<b>建議</b>：刪除/var/linkchecker下的所有節點，以停止連結檢查程式重新檢查URL。

{1}http://host:port/system/console/configMgr



注意：

如果您使用service.special_link_patterns，則連結檢查器仍會檢查該URL，以查看其字元和結構是否有效。


<br> 以程式設計方式停用外部連結檢查<br> 
在頁面元件jsp中新增此程式碼，可防止借由呼叫來完成外部連結檢查 <b>LinkCheckerSettings.fromRequest(slingRequest)。setIgnoreExternals(true)</b>.  在大多數情況下，您只會在發佈例項上實施，而不會製作。  下面是一些程式來演示：
<br> <br>

| 1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14 | `%``org.apache.sling.runmode.RunMode runmode = sling.getService(org.apache.sling.runmode.RunMode.``class``);``String runmodes = runmode.getCurrentRunModes();``boolean` `isPublish =``false``;``String  expectedRunModes = {``"publish"``};``if``(runmode.isActive(expectedRunModes)) {``isPublish =``true``;``}`<br> <br>`if``(isPublish) {``LinkCheckerSettings s = LinkCheckerSettings.fromRequest(slingRequest);``s.setIgnoreExternals(``true``);``}``%` |
| --- | --- |

<br> 
如果您只想停用特定元件或頁面部分的連結檢查，則可以使用此程式碼重新啟用：
<br> <br>

| 1<br>2<br>3 | `%``s.setIgnoreExternals(``false``);``%` |
| --- | --- |

