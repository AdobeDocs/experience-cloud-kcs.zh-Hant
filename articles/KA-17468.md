---
title: 停用AEM連結檢查程式
description: 說明
solution: Experience Manager
product: Experience Manager
applies-to: Experience Manager 6.4
keywords: KCS
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Shamithru Selvan
article-created-date: 6/22/2022 1:55:19 PM
article-published-by: Shamithru Selvan
article-published-date: 6/22/2022 1:56:20 PM
version-number: 4
article-number: KA-17468
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=ae18d9f1-32f2-ec11-bb3d-6045bd01576a
exl-id: 4bef4f66-061a-4cc6-b17b-5c8c2995cd34
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '406'
ht-degree: 1%

---

# 停用AEM連結檢查程式

## 說明


連結檢查程式已設定為在連結中斷時不會採取任何動作。 在此情況下，如何停用外部連結檢查程式來驗證連結？ 在執行CPU分析和分析線程轉儲時，鏈路檢查會影響效能，我們希望將其關閉。
<br><br><br><br> <br><br><br><br>
<b>背景</b>:  每當AEM中載入網站時，「連結檢查器」就會自動檢查所有內容頁面中的內嵌連結，並將每個連結標示為「有效」或「無效」。

由於記錄檔中有大量連結檢查程式警告，這可能會減緩執行個體或網站的速度。  可以決定停用某些連結檢查。

<b>附註</b>:  不應在 <b>發佈</b> 例項。


## 解析度

<br>如何停用連結檢查程式，或在AEM中設定將連結標示為有效<br><br><br><br><br>
1. 停用頁面中的連結檢查：

- 新增 <b>x-cq-linkchecker=&quot;valid&quot;</b> 參數，確保連結會一律由「連結檢查程式」標示為有效。
- （可選）使用 <b>x-cq-linkchecker=&quot;skip&quot;</b> 在中。連結檢查程式甚至不會檢查有效性。


2. 透過 <b>AEM Web Console:</b>

- 存取AEM Web主控台設定1。
- 搜尋 <b>Day CQ鏈路檢查器變壓器。</b>
- 檢查「<b>禁用檢查</b>」框，然後按一下「保存」。


3. 禁用特定域的連結檢查：

- 存取AEM Web主控台設定1。
- 搜尋 <b>日CQ連結檢查程式服務</b>.
- 編輯 <b>連結檢查覆蓋模式</b> 參數。


<b>範例1</b>:系統/

不會檢查以系統開頭的任何外部連結。  按一下+，將其他覆寫模式新增至此區段。

<b>範例 2</b>:

這會將所有連結標示為有效的後續項目。

<b>建議</b>：刪除/var/linkchecker下的所有節點，以停止連結檢查程式重新檢查URL。

1 http://host:port/system/console/configMgr



注意:

如果您使用service.special_link_patterns，則連結檢查器仍會檢查該URL，以查看其字元和結構是否有效。


<br><br><br><br> <br><br>以程式設計方式停用外部連結檢查<br><br><br><br> <br><br>
在頁面元件jsp中新增此程式碼，可防止借由呼叫來完成外部連結檢查 <b>LinkCheckerSettings.fromRequest(slingRequest)。setIgnoreExternals(true)</b>.  在大多數情況下，您只會在發佈例項上實施，而不會製作。  下面是一些程式來演示：
<br><br><br><br><br> <br><br><br><br>

| 1<br>  2<br>  3<br>  4<br>  5<br>  6<br>  7<br>  8<br>  9<br>  10<br>  11<br>  12<br>  13<br>  14 | `%``org.apache.sling.runmode.RunMode runmode = sling.getService(org.apache.sling.runmode.RunMode.``class``);``String runmodes = runmode.getCurrentRunModes();``boolean` `isPublish =``false``;``String  expectedRunModes = {``"publish"``};``if``(runmode.isActive(expectedRunModes)) {``isPublish =``true``;``}`<br>   <br>  `if``(isPublish) {``LinkCheckerSettings s = LinkCheckerSettings.fromRequest(slingRequest);``s.setIgnoreExternals(``true``);``}``%` |
| --- | --- |

<br><br><br><br><br> <br><br>
如果您只想停用特定元件或頁面部分的連結檢查，則可以使用此程式碼重新啟用：
<br><br><br><br><br> <br><br><br><br>

| 1<br>  2<br>  3 | `%``s.setIgnoreExternals(``false``);``%` |
| --- | --- |
