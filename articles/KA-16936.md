---
title: 「透過SSL/TLS終止的負載平衡器存取時，AEM會將使用者重新導向回http | AEM
description: 說明
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "Helpx Link: https://helpx.adobe.com/experience-manager/kb/AEM-redirecting-back-to-http-on-accessed-via-SSL-terminated-Load-Balancer.html"
bug: false
article-created-by: Emily Geary
article-created-date: "4/12/2021 6:21:34 PM"
article-published-by: Emily Geary
article-published-date: "4/12/2021 6:26:15 PM"
version-number: 1
article-number: KA-16936
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=684ec8e8-bb9b-eb11-b1ac-000d3a3680d8"
exl-id: 52e50c09-67f2-46a2-90a7-df769d76a0dd
source-git-commit: 0c3e421beca46d9fe1952b1f98538a50697216a0
workflow-type: tm+mt
source-wordcount: '341'
ht-degree: 1%

---

# AEM透過SSL/TLS終止的負載平衡器存取時，會將使用者重新導向回http | AEM

## 說明


透過SSL終止的負載平衡器（或SSL終止的CDN）存取AEM時，AEM會從https重新導向回http。

負載平衡器處的SSL終止表示SSL憑證已安裝在負載平衡器中。 一般使用者透過 `https://`，而Dispatcher/Web伺服器和AEM則在後端以 `http://`.



<b>原因</b>

不同的負載平衡器會傳送不同的標題，以通知後端系統SSL已在上游終止。 例如， [Amazon ELB使用標題「X-Forwarded-Proto:https」](https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/x-forwarded-headers.html#x-forwarded-proto).


## 解析度


若要修正問題：

<b>I.更新Dispatcher `/clientheaders` 配置</b>

請參閱負載平衡器的檔案，了解其設定哪個標題，以通知下游系統已終止SSL。 為了簡單起見，在這些步驟中，我們假設正確的HTTP標題為 *`X-Forwarded-Proto: https`*

1. 登入Dispatcher伺服器。
2. 開啟Dispatcher伺服器陣列 `.any` 設定。
3. 將標題新增至 `/clientheaders` 區段。


如果您使用的調度程式沒有負載平衡器，或您的負載平衡器或代理無法設定 `X-Forwarded-Proto` 標題，則可在web伺服器或dispatcher層級進行設定。 如果您使用 [!DNL Apache HTTP Server]，然後使用此指令更新您的HTTPS VirtualHost :


| 1 | `RequestHeader ` `set` `X-Forwarded-Proto ` `"https"` |
| --- | --- |


<b>二。 更新標題設定：</b>

1. 前往 *http://host:port*/system/console/configMgr/org.apache.felix.http.sslfilter.SslFilter，並以管理員身分登入。
2. 將SSL轉發標頭設定為 `X-Forwarded-Proto`.
3. 將SSL轉送值設為https。
4. 按一下「儲存」 。


注意:

反向代理報頭沒有標準，無法告訴後端使用哪種協定。 不過，以下是已知部分：

- Amazon ELB([!DNL Elastic Load Balancer])使用 `X-Forwarded-Proto: https` 頁首。
- [!DNL Amazon Cloudfront] CDN使用 `X-Cloudfront-Proto: https` 頁首。


<b>三。 更新Jetty OSGi設定(AEM 6.3及更新版本)</b>

AEM 6.3及更新版本需要額外設定：

- 登入http://aem-host:port/system/console/configMgr/org.apache.felix.http 。
- 啟用設定 <b>啟用代理/負載平衡器連接</b>，然後儲存。
