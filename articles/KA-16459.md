---
title: 「在 AEM6.x 中頁面載入期間發生 \「回應已認可\」錯誤」
description: 瞭解如何疑難排解AEM記錄檔中的java.lang.IllegalStateException錯誤，特別是與瀏覽靜態內容相關的錯誤。
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: 「KCS、Adobe Experience Manager、\「已提交回應\」錯誤、頁面載入、AEM、6.x、JSP工作階段標幟、回應緩衝區大小」
resolution: Resolution
internal-notes: "Helpx Link: https://helpx.adobe.com/experience-manager/kb/Response-is-committed-error-during-page-load-AEM.html"
bug: false
article-created-by: Eshaa Tiwari
article-created-date: "10/26/2023 3:09:29 PM"
article-published-by: Eshaa Tiwari
article-published-date: "10/27/2023 2:41:47 PM"
version-number: 5
article-number: KA-16459
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=41d53aa6-1174-ee11-9ae7-6045bd0063aa"
source-git-commit: 19eb6a374733d783013ab20d9e99f0d5d0e71bfb
workflow-type: tm+mt
source-wordcount: '245'
ht-degree: 33%

---

# 在 AEM6.x 中頁面載入期間發生「回應已認可」錯誤


探索如何解決令人困惑的問題 *java.lang.IllegalStateException* AEM記錄檔在靜態內容瀏覽期間發生錯誤。 瞭解有效的解決方案，以提供順暢的使用者體驗。

## 說明 {#description}


<b>環境</b>
Adobe Experience Manager 6.x

<b>問題</b>
如果AEM記錄顯示 *java.lang.IllegalStateException：回應已認可* 錯誤來自 `org.eclipse.jetty.server.Request.getSession` 瀏覽至靜態內容時，設定如下：


| `28.12.2016 08:58:44.162 *ERROR* [ 10.150.165.69 [ 1482915520460]  GET ` `/us/en/home/about` `.html HTTP` `/1` `.1]  org.apache.sling.scripting.jsp.jasper.runtime.JspFactoryImpl Exception initializing page context`<br>`java.lang.IllegalStateException: Response is committed`<br>`at org.eclipse.jetty.server.Request.getSession(Request.java:1400)`<br>`at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:229)`<br>`at org.apache.felix.http.base.internal.dispatch.ServletRequestWrapper.getSession(ServletRequestWrapper.java:233)`<br>`at org.apache.felix.http.base.internal.dispatch.ServletRequestWrapper.getSession(ServletRequestWrapper.java:226)`<br>`at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:238)`<br>`at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:238)`<br>`at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:238)`<br>`at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:238)`<br>`at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:238)`<br>`at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:238)`<br>`at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:238)`<br>`at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:238)`<br>`at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:238)`<br>`at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:238)`<br>`at org.apache.sling.scripting.jsp.jasper.runtime.PageContextImpl._initialize(PageContextImpl.java:149)`<br>`at org.apache.sling.scripting.jsp.jasper.runtime.PageContextImpl.initialize(PageContextImpl.java:127)`<br>`at org.apache.sling.scripting.jsp.jasper.runtime.JspFactoryImpl.internalGetPageContext(JspFactoryImpl.java:88)`<br>`at org.apache.sling.scripting.jsp.jasper.runtime.JspFactoryImpl.getPageContext(JspFactoryImpl.java:57)`<br>`at org.apache.sling.scripting.jsp.jasper.compiler.JspRuntimeContext$JspFactoryHandler.getPageContext(JspRuntimeContext.java:104)`<br>`at org.apache.jsp.apps.geometrixx.components.page.aboutlanding_002dpage.template_002dfootlibs_jsp._jspService(template_002dfootlibs_jsp.java:44)`<br>`at org.apache.sling.scripting.jsp.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)`<br>`at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)`<br>`at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:502)`<br>`at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:449)`<br>`at org.apache.sling.scripting.jsp.JspScriptEngineFactory.callJsp(JspScriptEngineFactory.java:284)`<br>`at org.apache.sling.scripting.jsp.JspScriptEngineFactory.access$100(JspScriptEngineFactory.java:102)`<br>`at org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine.eval(JspScriptEngineFactory.java:536)`<br>`at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:388)`<br>`at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)`<br>`at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)`<br>`at com.day.cq.wcm.tags.IncludeTag.includeScript(IncludeTag.java:178)`<br>`at com.day.cq.wcm.tags.IncludeTag.doEndTag(IncludeTag.java:95)`<br>`at org.apache.jsp.apps.geometrixx.components.page.base_002dtemplate_002dpage.footerlibs_jsp._jspx_meth_cq_005finclude_005f0(footerlibs_jsp.java:433)`<br>`at org.apache.jsp.apps.geometrixx.components.page.base_002dtemplate_002dpage.footerlibs_jsp._jspService(footerlibs_jsp.java:295)`<br>`at org.apache.sling.scripting.jsp.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)`<br>`at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)`<br>`at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:502)`<br>`at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:449)`<br>`at org.apache.sling.scripting.jsp.JspScriptEngineFactory.callJsp(JspScriptEngineFactory.java:284)`<br>`at org.apache.sling.scripting.jsp.JspScriptEngineFactory.access$100(JspScriptEngineFactory.java:102)`<br>`at org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine.eval(JspScriptEngineFactory.java:536)`<br>`at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:388)`<br>`at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)`<br>`at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)`<br>`at com.day.cq.wcm.tags.IncludeTag.includeScript(IncludeTag.java:178)`<br>`at com.day.cq.wcm.tags.IncludeTag.doEndTag(IncludeTag.java:95)`<br>`at org.apache.jsp.apps.geometrixx.components.page.base_002dtemplate_002dpage.body_jsp._jspx_meth_cq_005finclude_005f4(body_jsp.java:549)`<br>`at org.apache.jsp.apps.geometrixx.components.page.base_002dtemplate_002dpage.body_jsp._jspService(body_jsp.java:299)`<br>`at org.apache.sling.scripting.jsp.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)`<br>`at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)`<br>`at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:502)`<br>`at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:449)`<br>`at org.apache.sling.scripting.jsp.JspScriptEngineFactory.callJsp(JspScriptEngineFactory.java:284)`<br>`at org.apache.sling.scripting.jsp.JspScriptEngineFactory.access$100(JspScriptEngineFactory.java:102)`<br>`at org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine.eval(JspScriptEngineFactory.java:536)`<br>`at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:388)`<br>`at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)`<br>`at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)`<br>`at com.day.cq.wcm.tags.IncludeTag.includeScript(IncludeTag.java:178)`<br>`at com.day.cq.wcm.tags.IncludeTag.doEndTag(IncludeTag.java:95)`<br>`at org.apache.jsp.apps.geometrixx.components.page.base_002dtemplate_002dpage.base_002dtemplate_002dpage_jsp._jspx_meth_cq_005finclude_005f1(base_002dtemplate_002dpage_jsp.java:458)`<br>`at org.apache.jsp.apps.geometrixx.components.page.base_002dtemplate_002dpage.base_002dtemplate_002dpage_jsp._jspService(base_002dtemplate_002dpage_jsp.java:362)`<br>`at org.apache.sling.scripting.jsp.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)`<br>`at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)`<br>`at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:502)`<br>`at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:449)`<br>`at org.apache.sling.scripting.jsp.JspScriptEngineFactory.callJsp(JspScriptEngineFactory.java:284)`<br>`at org.apache.sling.scripting.jsp.JspScriptEngineFactory.access$100(JspScriptEngineFactory.java:102)`<br>`at org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine.eval(JspScriptEngineFactory.java:536)`<br>`at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:388)`<br>`at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)`<br>`at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)`<br>`at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:546)`<br>`at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)`<br>`at com.day.cq.personalization.impl.TargetComponentFilter.doFilter(TargetComponentFilter.java:96)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.day.cq.wcm.core.impl.WCMDebugFilter.doFilter(WCMDebugFilter.java:133)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.day.cq.wcm.core.impl.WCMComponentFilter.doFilter(WCMComponentFilter.java:265)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.day.cq.wcm.core.impl.WCMDeveloperModeFilter.doFilter(WCMDeveloperModeFilter.java:114)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)`<br>`at org.apache.sling.engine.impl.SlingRequestProcessorImpl.dispatchRequest(SlingRequestProcessorImpl.java:322)`<br>`at org.apache.sling.engine.impl.request.SlingRequestDispatcher.dispatch(SlingRequestDispatcher.java:211)`<br>`at org.apache.sling.engine.impl.request.SlingRequestDispatcher.include(SlingRequestDispatcher.java:104)`<br>`at com.day.cq.wcm.core.impl.WCMComponentFilter$ForwardRequestDispatcher.include(WCMComponentFilter.java:503)`<br>`at org.apache.jsp.libs.cq.Page.Page_jsp._jspService(Page_jsp.java:106)`<br>`at org.apache.sling.scripting.jsp.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)`<br>`at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)`<br>`at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:502)`<br>`at org.apache.sling.scripting.jsp.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:449)`<br>`at org.apache.sling.scripting.jsp.JspScriptEngineFactory.callJsp(JspScriptEngineFactory.java:284)`<br>`at org.apache.sling.scripting.jsp.JspScriptEngineFactory.access$100(JspScriptEngineFactory.java:102)`<br>`at org.apache.sling.scripting.jsp.JspScriptEngineFactory$JspScriptEngine.eval(JspScriptEngineFactory.java:536)`<br>`at org.apache.sling.scripting.core.impl.DefaultSlingScript.call(DefaultSlingScript.java:388)`<br>`at org.apache.sling.scripting.core.impl.DefaultSlingScript.eval(DefaultSlingScript.java:184)`<br>`at org.apache.sling.scripting.core.impl.DefaultSlingScript.service(DefaultSlingScript.java:491)`<br>`at org.apache.sling.engine.impl.request.RequestData.service(RequestData.java:546)`<br>`at org.apache.sling.engine.impl.filter.SlingComponentFilterChain.render(SlingComponentFilterChain.java:44)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)`<br>`at com.day.cq.personalization.impl.TargetComponentFilter.doFilter(TargetComponentFilter.java:96)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.day.cq.wcm.core.impl.WCMDebugFilter.doFilter(WCMDebugFilter.java:133)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.day.cq.wcm.core.impl.WCMComponentFilter.filterRootInclude(WCMComponentFilter.java:362)`<br>`at com.day.cq.wcm.core.impl.WCMComponentFilter.doFilter(WCMComponentFilter.java:177)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at org.apache.sling.engine.impl.SlingRequestProcessorImpl.processComponent(SlingRequestProcessorImpl.java:282)`<br>`at org.apache.sling.engine.impl.filter.RequestSlingFilterChain.render(RequestSlingFilterChain.java:49)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:77)`<br>`at com.adobe.cq.social.ugcbase.security.impl.SaferSlingPostServlet.doFilter(SaferSlingPostServlet.java:114)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.day.cq.dam.core.impl.assetlinkshare.AdhocAssetShareAuthHandler.doFilter(AdhocAssetShareAuthHandler.java:381)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.day.cq.dam.core.impl.servlet.ActivityRecordHandler.doFilter(ActivityRecordHandler.java:155)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:73)`<br>`at com.adobe.granite.requests.logging.impl.RequestLoggerImpl.doFilter(RequestLoggerImpl.java:127)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.adobe.granite.csrf.impl.CSRFFilter.doFilter(CSRFFilter.java:220)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at org.apache.sling.security.impl.ContentDispositionFilter.doFilter(ContentDispositionFilter.java:181)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.day.cq.wcm.core.impl.AuthoringUIModeServiceImpl.doFilter(AuthoringUIModeServiceImpl.java:292)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.day.cq.wcm.core.impl.warp.TimeWarpFilter.doFilter(TimeWarpFilter.java:106)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.day.cq.wcm.mobile.core.impl.redirect.RedirectFilter.doFilter(RedirectFilter.java:248)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.day.cq.analytics.provisioning.impl.UserAuthenticationRequestFilter.doFilter(UserAuthenticationRequestFilter.java:119)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at org.apache.sling.engine.impl.debug.RequestProgressTrackerLogFilter.doFilter(RequestProgressTrackerLogFilter.java:95)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.adobe.cq.social.commons.cors.CORSAuthenticationFilter.doFilter(CORSAuthenticationFilter.java:91)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.day.cq.wcm.foundation.forms.impl.FormsHandlingServlet.doFilter(FormsHandlingServlet.java:285)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.adobe.granite.optout.impl.OptOutFilter.doFilter(OptOutFilter.java:74)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.day.cq.wcm.core.impl.WCMRequestFilter.doFilter(WCMRequestFilter.java:90)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.adobe.cq.mcm.campaign.servlets.CampaignCopyTracker.doFilter(CampaignCopyTracker.java:100)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at org.apache.sling.rewriter.impl.RewriterFilter.doFilter(RewriterFilter.java:83)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.adobe.granite.httpcache.impl.InnerCacheFilter.doFilter(InnerCacheFilter.java:77)`<br>`at com.adobe.granite.httpcache.impl.InnerCacheFilter.doFilter(InnerCacheFilter.java:56)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.adobe.granite.rest.impl.servlet.ApiResourceFilter.doFilter(ApiResourceFilter.java:67)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:129)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at org.apache.sling.bgservlets.impl.BackgroundServletStarterFilter.doFilter(BackgroundServletStarterFilter.java:169)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at com.adobe.granite.resourceresolverhelper.impl.ResourceResolverHelperImpl.doFilter(ResourceResolverHelperImpl.java:84)`<br>`at org.apache.sling.engine.impl.filter.AbstractSlingFilterChain.doFilter(AbstractSlingFilterChain.java:68)`<br>`at org.apache.sling.engine.impl.SlingRequestProcessorImpl.doProcessRequest(SlingRequestProcessorImpl.java:151)`<br>`at org.apache.sling.engine.impl.SlingMainServlet.service(SlingMainServlet.java:216)`<br>`at org.apache.felix.http.base.internal.handler.ServletHandler.handle(ServletHandler.java:85)`<br>`at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:79)`<br>`at com.adobe.granite.license.impl.LicenseCheckFilter.doFilter(LicenseCheckFilter.java:308)`<br>`at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)`<br>`at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)`<br>`at org.apache.felix.http.sslfilter.internal.SslFilter.doFilter(SslFilter.java:89)`<br>`at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)`<br>`at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)`<br>`at org.apache.sling.security.impl.ReferrerFilter.doFilter(ReferrerFilter.java:290)`<br>`at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)`<br>`at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)`<br>`at org.apache.sling.i18n.impl.I18NFilter.doFilter(I18NFilter.java:129)`<br>`at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)`<br>`at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)`<br>`at org.apache.sling.featureflags.impl.FeatureManager.doFilter(FeatureManager.java:116)`<br>`at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)`<br>`at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)`<br>`at org.apache.sling.engine.impl.log.RequestLoggerFilter.doFilter(RequestLoggerFilter.java:75)`<br>`at org.apache.felix.http.base.internal.handler.FilterHandler.handle(FilterHandler.java:135)`<br>`at org.apache.felix.http.base.internal.dispatch.InvocationChain.doFilter(InvocationChain.java:74)`<br>`at org.apache.felix.http.base.internal.dispatch.Dispatcher.dispatch(Dispatcher.java:124)`<br>`at org.apache.felix.http.base.internal.DispatcherServlet.service(DispatcherServlet.java:61)`<br>`at javax.servlet.http.HttpServlet.service(HttpServlet.java:725)`<br>`at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:812)`<br>`at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:587)`<br>`at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:221)`<br>`at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)`<br>`at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)`<br>`at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)`<br>`at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)`<br>`at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)`<br>`at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:215)`<br>`at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)`<br>`at org.eclipse.jetty.server.Server.handle(Server.java:499)`<br>`at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:311)`<br>`at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:257)`<br>`at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:544)`<br>`at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)`<br>`at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)`<br>`at java.lang.Thread.run(Thread.java:745)` |
| --- |





## 解決方法 {#resolution}

<b>解決方案</b>
這個問題有幾個可能的解決方案：<br>
1. 如果您的應用程式中不需要 JSP 工作階段，則請確保將此程式碼新增到每個 jsp 檔案的頂端：

   `<%@ page session="false"%>`
2. 修改應用程式 JSP 程式碼以將 JSP 工作階段新增到在 Sling 解析流程中較早載入的 jsp 檔案中。

   若要這麼做，請設定 <b>JSP工作階段標幟</b> 至 *真*：

   `<%@ page session="true"%>`
3. 或者增加 Jetty servlet 引擎的回應緩衝區大小，以避免提早自動排清。

   <b>回應緩衝區大小</b> 可在Jetty OSGi設定上設定 `(http://host:port/system/console/configMgr/org.apache.felix.http`)。

   您可以安全地將其增加到 *200000*.

<b>原因</b>
在Sling指令碼包含棧疊中太晚新增JSP工作階段。

由於已將足夠的位元組寫入回應，Jetty servlet引擎會在新增JSESSIONID Cookie之前自動排清回應緩衝區，進而導致錯誤。
