---
title: Campaign Classic- SHA256和SHA512函式返回錯誤的第2次哈希更新
description: 說明
solution: Campaign
product: Campaign
applies-to: Campaign Classic,Campaign
keywords: KCS - SHA256和SHA512函式返回錯誤的第2次哈希更新
resolution: Resolution
internal-notes: https://jira.corp.adobe.com/browse/NEO-26500, E-000202021, E-000148142
bug: true
article-created-by: Marta Zator
article-created-date: 5/9/2022 2:40:05 PM
article-published-by: Marta Zator
article-published-date: 5/9/2022 2:45:38 PM
version-number: 2
article-number: KA-16235
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=cac10be5-a5cf-ec11-a7b5-0022480a8e40
exl-id: d8803e40-5813-4fd4-921d-df10956e1e74
source-git-commit: 0c3e421beca46d9fe1952b1f98538a50697216a0
workflow-type: tm+mt
source-wordcount: '258'
ht-degree: 1%

---

# Campaign Classic- SHA256和SHA512函式返回錯誤的第2次哈希更新

## 說明


客戶回報SHA256和SHA512函式傳回錯誤的雜湊。

他們發現，有些使用者也遇到此問題。
https://experienceleaguecommunities.adobe.com/t5/adobe-campaign-classic-questions/sha256-and-sha512-function-returns-wrong-hash/qaq-p/351035/comment-id/3882


## 解析度


客戶共用了他們找到的解決方案：

問題出現的原因是Adobe將字串資料類型轉換為 `nvarchar` 而非 `varchar` 在DB使用unicode編碼的情況下。
在客戶的情況下，資料庫編碼預設值會以unicode形式使用，以支援泰文語言。 這就是為什麼Adobe將字串轉換為nvarchar。

對於函式SHA256和SHA512，它可正常運作，但會針對傳回不同雜湊值 `varchar` 和 `nvarchar`.

在客戶的情況下，可將該欄位（僅包含行動電話號碼）變更為 `varchar` 並正確加以雜湊。

Adobe社群文章：
[https://experienceleaguecommunities.adobe.com/t5/adobe-campaign-classic-questions/sha256-and-sha512-functions-returning-wrong-hash/qaq-p/351034](https://experienceleaguecommunities.adobe.com/t5/adobe-campaign-classic-questions/sha256-and-sha512-functions-returning-wrong-hash/qaq-p/351034)



此外，若 [!DNL SQL Server] 使用時，摘要函式會使用字串的utf-16表示法。 您將無法獲得預期的摘要（通常以ascii或ut-8字元計算）。

範例：「hello」會在字串的ascii/utf-8表示法上將14cde7c9ad35de5a37fce2ac276742175028fd9f7cdf0dae01ff508b126429d9指定為sha2-256，並將字串的18fe2820b38427a08a5b49fb4d71a7027799bfe0050d30ca4a35a以utf-16表示。
